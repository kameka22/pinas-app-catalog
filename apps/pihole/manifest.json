{
  "id": "pihole",
  "name": "Pi-hole",
  "version": "5.18.2",
  "description": {
    "en": "Network-wide ad blocking. Pi-hole acts as a DNS sinkhole to block ads and trackers at the network level.",
    "fr": "Blocage de publicités au niveau réseau. Pi-hole agit comme un DNS sinkhole pour bloquer les pubs et trackers."
  },
  "author": "Pi-hole LLC",
  "license": "EUPL",
  "website": "https://pi-hole.net",
  "icon": "mdi:shield-check",
  "changelog": "https://github.com/pi-hole/pi-hole/releases",

  "requirements": {
    "min_ram": 256,
    "min_disk": 200,
    "arch": ["aarch64", "x86_64"],
    "dependencies": ["docker"]
  },

  "install": {
    "type": "docker",
    "image": "pihole/pihole:2024.01.0",
    "container": {
      "name": "pihole",
      "hostname": "pihole",
      "restart": "unless-stopped",
      "network": "bridge",
      "ports": [
        { "host": 53, "container": 53, "protocol": "tcp" },
        { "host": 53, "container": 53, "protocol": "udp" },
        { "host": 8080, "container": 80, "protocol": "tcp" }
      ],
      "volumes": [
        { "host": "${DATA_DIR}/apps/pihole/etc-pihole", "container": "/etc/pihole", "readonly": false },
        { "host": "${DATA_DIR}/apps/pihole/etc-dnsmasq.d", "container": "/etc/dnsmasq.d", "readonly": false }
      ],
      "environment": [
        { "name": "TZ", "value": "Europe/Paris" },
        { "name": "WEBPASSWORD", "value": "pinas" }
      ],
      "labels": {
        "com.pinas.managed": "true",
        "com.pinas.app": "pihole"
      }
    },
    "steps": [
      {
        "action": "mkdir",
        "path": "${DATA_DIR}/apps/pihole/etc-pihole"
      },
      {
        "action": "mkdir",
        "path": "${DATA_DIR}/apps/pihole/etc-dnsmasq.d"
      },
      {
        "action": "docker_pull",
        "image": "pihole/pihole:2024.01.0"
      },
      {
        "action": "docker_create",
        "config": {
          "name": "pihole",
          "hostname": "pihole",
          "image": "pihole/pihole:2024.01.0",
          "restart": "unless-stopped",
          "ports": [
            { "host": 53, "container": 53, "protocol": "tcp" },
            { "host": 53, "container": 53, "protocol": "udp" },
            { "host": 8080, "container": 80, "protocol": "tcp" }
          ],
          "volumes": [
            { "host": "${DATA_DIR}/apps/pihole/etc-pihole", "container": "/etc/pihole" },
            { "host": "${DATA_DIR}/apps/pihole/etc-dnsmasq.d", "container": "/etc/dnsmasq.d" }
          ],
          "environment": [
            { "name": "TZ", "value": "Europe/Paris" },
            { "name": "WEBPASSWORD", "value": "pinas" }
          ],
          "labels": {
            "com.pinas.managed": "true",
            "com.pinas.app": "pihole"
          }
        }
      },
      {
        "action": "docker_start",
        "container": "pihole"
      }
    ]
  },

  "uninstall": {
    "steps": [
      {
        "action": "docker_stop",
        "container": "pihole"
      },
      {
        "action": "docker_rm",
        "container": "pihole"
      }
    ]
  },

  "files": {},

  "config": {
    "dns_port": 53,
    "web_port": 8080,
    "default_password": "pinas",
    "data_dir": "${DATA_DIR}/apps/pihole"
  },

  "frontend": {
    "component": "IframeApp",
    "icon": "mdi:shield-check",
    "gradient": "from-red-500 to-rose-600",
    "window": {
      "width": 1100,
      "height": 750,
      "min_width": 800,
      "min_height": 600
    },
    "config": {
      "port": 8080,
      "path": "/admin",
      "title": "Pi-hole"
    },
    "i18n": {
      "en": {
        "description": "Network-wide ad blocking dashboard",
        "defaultPassword": "Default password: pinas"
      },
      "fr": {
        "description": "Tableau de bord de blocage de publicités réseau",
        "defaultPassword": "Mot de passe par défaut : pinas"
      }
    }
  }
}
